---
layout: post
title: 配置虚拟机的开发环境
date: 2025-09-20 21:51:26 
last_modified_at: 2025-09-20 21:51:26 
tags: []
author: Daniel
toc: true
description: 关于配置虚拟机的开发环境的记录
---
# 配置虚拟机的开发环境

## 配置网络环境

这里的配置网络环境指的是配置桥接模式下的代理环境。

### 宿主机代理配置

1. 使用桥接模式
2. clash软件打开allow lan



<img src="https://raw.githubusercontent.com/JJcodo/Pictures/main/image-20250809010453622.png" alt="image-20250809010453622" style="zoom:50%;" />

### 1、wget 使用代理

```shell
export http_proxy="http://192.168.124.5:7890"
export https_proxy="http://192.168.124.5:7890"

sudo vim /etc/wgetrc
http_proxy = http://192.168.124.5:7890/
https_proxy = http://192.168.124.5:7890/
```

### 2、git 使用代理

```shell
# 192.168.124.5 为宿主机ip
git config --global http.proxy http://192.168.124.5:7890
git config --global https.proxy https://192.168.124.5:7890
```



## 配置vscode环境

### 配置基础运行环境

```shell
Commit: 0f0d87fa9e96c856c5212fc86db137ac0d783365
点击顶部采用中（帮助/Help），选择(关于/about)
#将信息复制下来，保存其中的Commit信息
Commit: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
#将Commit信息替换commit_id的信息，并下载
wget https://update.code.visualstudio.com/commit:commit_id/server-linux-x64/stable
#创建目录
mkdir -p ~/.vscode-server/bin
#将下载得到的stable文件移动到新建的目录
cp stable ~/.vscode-server/bin
cd ~/.vscode-server/bin
tar -zxvf stable

将解压成的文件命名为commit_id
cd ~/.vscode-server/bin/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
touch 0
```

### 自启动配置

```shell
# 安装systemd
sudo apt-get update
sudo apt-get install systemd
#
sudo vim /etc/systemd/system/vscode-server.service
#配置文件内存
[Unit]
Description=Visual Studio Code Server
After=network.target

[Service]
Type=simple
ExecStart=/home/daniel/.vscode-server/bin/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx/bin/code-server
Restart=on-failure

[Install]
WantedBy=multi-user.target

sudo chmod +x /etc/systemd/system/vscode-server.service
#重新加载配置
sudo systemctl daemon-reload
#启动VSCode服务器并设置它在系统启动时自动启动
sudo systemctl start vscode-server
sudo systemctl enable vscode-server
```

### 配置SSH免密登录

```shell
# 配置 SSH 免密登陆
# 在windows环境中执行，生成的密钥记录在 C:\Users\你的用户名\.ssh
ssh-keygen -C "comment" comment 一般是邮箱地址daneilcoder@gmail.com
# ssh-keygen -C "daneilcoder@gmail.com"
# daniel@192.168.124.15 是user_name@server_ip
# 在cmder中或者其他支持cat命令的shell中执行
cat ~/.ssh/id_rsa.pub | ssh daniel@192.168.124.15 "mkdir -p ~/.ssh && cat >> ~/.ssh/authorized_keys"
```

参考文章：https://zhuanlan.zhihu.com/p/493050003

## 安装GDB

```
sudo apt update
sudo apt install gdb
```



## 配置Git 环境



### 配置git 邮箱环境

```shell
# 安装git-email
sudo apt install git
sudo apt install git-email
# 在安装git-email的时候已经安装
sudo apt install libauthen-sasl-perl libnet-smtp-ssl-perl

# git配置vim
git config --global core.editor "vim"
# 配置git邮箱和用户名
git config --global user.name "jinji zhong"
git config --global user.email jinji.z.zhong@gmail.com
git config --global sendemail.smtpServer smtp.gmail.com
git config --global sendemail.smtpServerPort 587
git config --global sendemail.smtpEncryption tls
git config --global sendemail.smtpUser jinji.z.zhong@gmail.com
git config --global credential.helper store
git config --list

# 也可以直接改配置文件gitconfig
vim ~/.gitconfig
[user]
    name = jinji zhong
    email = jinji.z.zhong@gmail.com
[sendemail]
    smtpServer = smtp.gmail.com
    smtpServerPort = 587
    smtpEncryption = tls
    smtpUser = jinji.z.zhong@gmail.com
    # (Optional: we'll leave this commented out and use a different way)
    # smtpPass = PASSWORD
[credential]
    helper = store

# 谷歌邮箱开启两步验证
https://myaccount.google.com/security

#为 gmail 生成一个应用程序专用密码以供 git 使用
https://myaccount.google.com/apppasswords

# 记下你的密码，提交的时候需要输入（不需要空格）
xxxxxxxxxxxxxxxxxx

# 生成patch
git format-patch -2 HEAD
0001-it-is-unnecessary-to-set-page-private-in-__del_page_.patch

git send-email --to=zhongjinji@honor.com \
0001-mm-page_alloc-Free-pages-including-those-from-the-pc.patch \
0002-mm-page_alloc-free-the-free-folios-before-resched.patch

proxychains4 git send-email --to=jinji.z.zhong@gmail.com reply.email

# 使用代理发送
proxychains4 git send-email your_patch.email

export http_proxy="http://192.168.124.5:7890"
export https_proxy="http://192.168.124.5:7890"
```



参考文章：https://stackoverflow.com/questions/68238912/how-to-configure-and-use-git-send-email-to-work-with-gmail-to-email-patches-to



### 配置VIM环境



```shell
" ~/.vimrc 中的邮件配置部分
augroup email_settings
    autocmd!
        autocmd FileType mail setlocal textwidth=72
        autocmd FileType mail setlocal wrap
        autocmd FileType mail setlocal formatoptions=tcroq
        autocmd FileType mail setlocal autoindent
        autocmd FileType mail setlocal spell spelllang=en_us
        autocmd FileType mail setlocal comments=n:>
        autocmd FileType mail setlocal commentstring=>\ %s
augroup END
call plug#begin('~/.vim/plugged')
Plug 'tpope/vim-commentary'
call plug#end()
augroup mail_file_detection
    autocmd!
    autocmd BufNewFile,BufRead *.eml,*.mail,*.mbox setfiletype mail
augroup END

# 安装插件
vim +PlugInstall +qall

# 注释q
:%normal gcc
```

